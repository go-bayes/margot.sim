<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Basic Simulation with margot.sim • margot.sim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic Simulation with margot.sim">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot.sim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/basic-simulation.html">Basic Simulation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Topics</h6></li>
    <li><a class="dropdown-item" href="../articles/applying-shadows.html">Applying Observational Shadows</a></li>
    <li><a class="dropdown-item" href="../articles/monte-carlo-simple.html">Monte Carlo Evaluation</a></li>
    <li><a class="dropdown-item" href="../articles/shift-interventions.html">Shift Interventions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/go-bayes/margot.sim" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Basic Simulation with margot.sim</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/go-bayes/margot.sim/blob/main/vignettes/basic-simulation.Rmd" class="external-link"><code>vignettes/basic-simulation.Rmd</code></a></small>
      <div class="d-none name"><code>basic-simulation.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://go-bayes.github.io/margot.sim/">margot.sim</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; margot.sim 0.1.1</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>margot.sim</code> package extends the <code>margot</code>
package to provide sophisticated simulation capabilities for
longitudinal data analysis. This vignette demonstrates the basic
workflow for simulating longitudinal data with realistic observational
challenges.</p>
</div>
<div class="section level2">
<h2 id="basic-simulation">Basic Simulation<a class="anchor" aria-label="anchor" href="#basic-simulation"></a>
</h2>
<p>The core function <code><a href="../reference/margot_simulate.html">margot_simulate()</a></code> generates
longitudinal data following a semi-Markovian structural causal model
(SCM):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate basic longitudinal data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">sim_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/margot_simulate.html">margot_simulate</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,      <span class="co"># Number of subjects</span></span>
<span>  waves <span class="op">=</span> <span class="fl">3</span>,     <span class="co"># Number of measurement waves</span></span>
<span>  n_outcomes <span class="op">=</span> <span class="fl">1</span> <span class="co"># Number of outcomes (default)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">sim_data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [5 × 10] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ id                        : int [1:5] 1 2 3 4 5</span></span>
<span><span class="co">#&gt;  $ b1                        : num [1:5] 0.519 0.639 -0.532 -1.008 -1.602</span></span>
<span><span class="co">#&gt;  $ b2                        : num [1:5] 0.0218 0.2721 -1.1797 1.1948 -0.2153</span></span>
<span><span class="co">#&gt;  $ b3                        : num [1:5] 0.6527 0.1079 -0.0967 0.0312 -1.2504</span></span>
<span><span class="co">#&gt;  $ b4                        : num [1:5] 0.922 0.487 -1.67 -0.148 2.828</span></span>
<span><span class="co">#&gt;  $ b5                        : num [1:5] -0.256 -0.743 -1.691 -0.304 -0.189</span></span>
<span><span class="co">#&gt;  $ t0_a                      : int [1:5] 1 1 1 0 0</span></span>
<span><span class="co">#&gt;  $ t0_y                      : num [1:5] -1.029 -0.947 -1.347 0.708 -1.455</span></span>
<span><span class="co">#&gt;  $ t0_not_lost_following_wave: int [1:5] 1 1 1 1 1</span></span>
<span><span class="co">#&gt;  $ t1_l                      : num [1:5] 0.7542 -0.0428 1.5278 1.5838 -1.1977</span></span>
<span><span class="co">#&gt;  - attr(*, "time_points")= chr [1:5] "t0" "t1" "t2" "t3" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "n_waves")= int 5</span></span>
<span><span class="co">#&gt;  - attr(*, "processed")= logi TRUE</span></span>
<span><span class="co">#&gt;  - attr(*, "margot_meta")=List of 15</span></span>
<span><span class="co">#&gt;   ..$ params                  :List of 32</span></span>
<span><span class="co">#&gt;   .. ..$ cens_rate     : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ cens_a_coef   : num 0.2</span></span>
<span><span class="co">#&gt;   .. ..$ cens_l_coef   : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ cens_y_coef   : num 0.15</span></span>
<span><span class="co">#&gt;   .. ..$ cens_latent_sd: num 0.5</span></span>
<span><span class="co">#&gt;   .. ..$ b_l_coef      : num 0.15</span></span>
<span><span class="co">#&gt;   .. ..$ b_a_coef      : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ b_y_coef      : num 0.15</span></span>
<span><span class="co">#&gt;   .. ..$ b_l_time_trend: num 0.05</span></span>
<span><span class="co">#&gt;   .. ..$ b_l_time_decay: num 0.02</span></span>
<span><span class="co">#&gt;   .. ..$ b_l_time_cycle: num 1</span></span>
<span><span class="co">#&gt;   .. ..$ a_autoreg     : num 0.25</span></span>
<span><span class="co">#&gt;   .. ..$ y_autoreg     : num 0.2</span></span>
<span><span class="co">#&gt;   .. ..$ y_a_coef      : num 0.15</span></span>
<span><span class="co">#&gt;   .. ..$ y_l_coef      : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ a_l_coef      : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ l_a_coef      : num 0.2</span></span>
<span><span class="co">#&gt;   .. ..$ l_y_coef      : num 0.15</span></span>
<span><span class="co">#&gt;   .. ..$ a_lag_y_coef  : num 0.25</span></span>
<span><span class="co">#&gt;   .. ..$ a_b_y_het     : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ a_l_y_het     : num 0.05</span></span>
<span><span class="co">#&gt;   .. ..$ a_b1_y_het    : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ a_b2_y_het    : num 0.08</span></span>
<span><span class="co">#&gt;   .. ..$ a_b3_y_het    : num 0.06</span></span>
<span><span class="co">#&gt;   .. ..$ a_y0_y_het    : num 0.15</span></span>
<span><span class="co">#&gt;   .. ..$ a_a0_y_het    : num 0.12</span></span>
<span><span class="co">#&gt;   .. ..$ y_cor         : num 0.5</span></span>
<span><span class="co">#&gt;   .. ..$ y2_shrink     : num 0.8</span></span>
<span><span class="co">#&gt;   .. ..$ y3_shrink     : num 0.6</span></span>
<span><span class="co">#&gt;   .. ..$ y1_y2_cross   : num 0.1</span></span>
<span><span class="co">#&gt;   .. ..$ y1_y3_cross   : num 0.05</span></span>
<span><span class="co">#&gt;   .. ..$ y2_y3_cross   : num 0.05</span></span>
<span><span class="co">#&gt;   ..$ y_feedback              : chr "full"</span></span>
<span><span class="co">#&gt;   ..$ n_outcomes              : num 1</span></span>
<span><span class="co">#&gt;   ..$ n_baselines             : num 5</span></span>
<span><span class="co">#&gt;   ..$ exposure_type           : chr "binary"</span></span>
<span><span class="co">#&gt;   ..$ outcome_type            : chr "continuous"</span></span>
<span><span class="co">#&gt;   ..$ structural_model        : chr "semi-markovian"</span></span>
<span><span class="co">#&gt;   ..$ intervention_applied    : logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ sampling_weights_applied: logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ censoring_probs         :List of 4</span></span>
<span><span class="co">#&gt;   .. ..$ : num [1:1000] 0.119 0.119 0.119 0.1 0.1 ...</span></span>
<span><span class="co">#&gt;   .. ..$ : num [1:1000] 0.119 0.119 0.119 0.1 0.1 ...</span></span>
<span><span class="co">#&gt;   .. ..$ : num [1:1000] 0.1 0.119 0.1 0.1 0.1 ...</span></span>
<span><span class="co">#&gt;   .. ..$ : num [1:1000] 0.1 0.119 0.1 0.1 0.1 ...</span></span>
<span><span class="co">#&gt;   ..$ waves                   : num 3</span></span>
<span><span class="co">#&gt;   ..$ n                       : num 1000</span></span>
<span><span class="co">#&gt;   ..$ format                  : chr "wide"</span></span>
<span><span class="co">#&gt;   ..$ timestamp               : POSIXct[1:1], format: "2025-06-10 10:20:13"</span></span>
<span><span class="co">#&gt;   ..$ shadows_applied         : logi FALSE</span></span></code></pre></div>
<p>The generated data includes: - <code>id</code>: Subject identifier -
<code>b1-b5</code>: Baseline covariates - <code>t0_a</code>,
<code>t1_a</code>, etc.: Treatment/exposure at each wave -
<code>t0_y</code>, <code>t1_y</code>, etc.: Outcomes at each wave -
<code>t1_l</code>, <code>t2_l</code>, etc.: Time-varying confounders</p>
</div>
<div class="section level2">
<h2 id="customizing-the-data-generation-process">Customizing the Data Generation Process<a class="anchor" aria-label="anchor" href="#customizing-the-data-generation-process"></a>
</h2>
<p>You can customize various aspects of the simulation:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Custom simulation with specific parameters</span></span>
<span><span class="va">sim_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/margot_simulate.html">margot_simulate</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  waves <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  n_baselines <span class="op">=</span> <span class="fl">3</span>,        <span class="co"># Fewer baseline covariates</span></span>
<span>  exposure_type <span class="op">=</span> <span class="st">"continuous"</span>,  <span class="co"># Continuous exposure</span></span>
<span>  outcome_type <span class="op">=</span> <span class="st">"binary"</span>,       <span class="co"># Binary outcome</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    b_a_coef <span class="op">=</span> <span class="fl">0.3</span>,      <span class="co"># Baseline → exposure effect</span></span>
<span>    a_y_coef <span class="op">=</span> <span class="fl">0.5</span>,      <span class="co"># Exposure → outcome effect</span></span>
<span>    b_y_coef <span class="op">=</span> <span class="fl">0.2</span>       <span class="co"># Baseline → outcome effect</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check exposure and outcome types</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">sim_custom</span><span class="op">$</span><span class="va">t1_a</span><span class="op">)</span>  <span class="co"># Continuous</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt; -3.2059 -0.8023 -0.0603 -0.0563  0.6681  5.0258</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sim_custom</span><span class="op">$</span><span class="va">t2_y</span><span class="op">)</span>    <span class="co"># Binary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   0   1 </span></span>
<span><span class="co">#&gt; 240 260</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-censoring">Adding Censoring<a class="anchor" aria-label="anchor" href="#adding-censoring"></a>
</h2>
<p>Real-world longitudinal studies often have dropout. You can add
censoring:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate with censoring</span></span>
<span><span class="va">sim_censored</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/margot_simulate.html">margot_simulate</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  waves <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  censoring <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    rate <span class="op">=</span> <span class="fl">0.2</span>,                    <span class="co"># 20% censoring rate per wave</span></span>
<span>    exposure_dependence <span class="op">=</span> <span class="cn">TRUE</span>,    <span class="co"># Censoring depends on exposure</span></span>
<span>    y_dependence <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># Censoring depends on outcome</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check censoring indicators</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sim_censored</span><span class="op">$</span><span class="va">t0_not_lost_following_wave</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1 </span></span>
<span><span class="co">#&gt; 1000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sim_censored</span><span class="op">$</span><span class="va">t1_not_lost_following_wave</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    1 </span></span>
<span><span class="co">#&gt; 1000</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="working-with-long-format">Working with Long Format<a class="anchor" aria-label="anchor" href="#working-with-long-format"></a>
</h2>
<p>For many analyses, you may want data in long format:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate in long format</span></span>
<span><span class="va">sim_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/margot_simulate.html">margot_simulate</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  waves <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  wide <span class="op">=</span> <span class="cn">FALSE</span>  <span class="co"># Request long format</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sim_long</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 11</span></span></span>
<span><span class="co">#&gt;      id    b1    b2     b3    b4     b5  time     a       y</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 -<span style="color: #BB0000;">1.52</span> -<span style="color: #BB0000;">1.42</span> -<span style="color: #BB0000;">0.815</span> 0.898 -<span style="color: #BB0000;">1.76</span>      0     1 -<span style="color: #BB0000;">2.05</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 -<span style="color: #BB0000;">1.52</span> -<span style="color: #BB0000;">1.42</span> -<span style="color: #BB0000;">0.815</span> 0.898 -<span style="color: #BB0000;">1.76</span>      1     0 -<span style="color: #BB0000;">0.896</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 -<span style="color: #BB0000;">1.52</span> -<span style="color: #BB0000;">1.42</span> -<span style="color: #BB0000;">0.815</span> 0.898 -<span style="color: #BB0000;">1.76</span>      2     1 -<span style="color: #BB0000;">0.487</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     1 -<span style="color: #BB0000;">1.52</span> -<span style="color: #BB0000;">1.42</span> -<span style="color: #BB0000;">0.815</span> 0.898 -<span style="color: #BB0000;">1.76</span>      3     0 -<span style="color: #BB0000;">0.014</span><span style="color: #BB0000; text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     1 -<span style="color: #BB0000;">1.52</span> -<span style="color: #BB0000;">1.42</span> -<span style="color: #BB0000;">0.815</span> 0.898 -<span style="color: #BB0000;">1.76</span>      4    <span style="color: #BB0000;">NA</span>  1.10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     2  1.40  3.08  0.996 0.252  0.530     0     1  0.592 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: not_lost_following_wave &lt;int&gt;, l &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="co"># Number of observations per person</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sim_long</span><span class="op">$</span><span class="va">id</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   5 </span></span>
<span><span class="co">#&gt; 200</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-interventions">Using Interventions<a class="anchor" aria-label="anchor" href="#using-interventions"></a>
</h2>
<p>You can simulate data under specific intervention regimes:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define an intervention that sets treatment to 1 for everyone</span></span>
<span><span class="va">always_treat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">time</span>, <span class="va">trt</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Simulate under intervention</span></span>
<span><span class="va">sim_intervention</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/margot_simulate.html">margot_simulate</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  waves <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  intervention <span class="op">=</span> <span class="va">always_treat</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in check_positivity(df$t0_a, "t0_a", 0): Positivity violation at time 0</span></span>
<span><span class="co">#&gt; for t0_a: 100.0% treated (threshold: 1.0%)</span></span>
<span><span class="co">#&gt; Warning in check_positivity(df[[paste0("t", t, "_a")]], paste0("t", t, "_a"), :</span></span>
<span><span class="co">#&gt; Positivity violation at time 1 for t1_a: 100.0% treated (threshold: 1.0%)</span></span>
<span><span class="co">#&gt; Warning in check_positivity(df[[paste0("t", t, "_a")]], paste0("t", t, "_a"), :</span></span>
<span><span class="co">#&gt; Positivity violation at time 2 for t2_a: 100.0% treated (threshold: 1.0%)</span></span>
<span></span>
<span><span class="co"># Verify intervention was applied</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sim_intervention</span><span class="op">$</span><span class="va">t1_a</span><span class="op">)</span>  <span class="co"># All 1s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   1 </span></span>
<span><span class="co">#&gt; 500</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>This vignette covered basic simulation. See other vignettes for:</p>
<ul>
<li>
<strong>Applying Shadows</strong>: How to add measurement error,
missingness, and selection bias</li>
<li>
<strong>Monte Carlo Evaluation</strong>: How to evaluate estimator
performance</li>
<li>
<strong>Causal Inference</strong>: How to simulate data for causal
effect estimation</li>
</ul>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The <code><a href="../reference/margot_simulate.html">margot_simulate()</a></code> function provides a flexible
framework for generating realistic longitudinal data with:</p>
<ul>
<li>Customizable structural causal models</li>
<li>Various exposure and outcome types<br>
</li>
<li>Realistic censoring patterns</li>
<li>Support for interventions</li>
<li>Both wide and long format output</li>
</ul>
<p>This forms the foundation for more advanced simulation studies to
evaluate statistical methods under realistic conditions.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joseph Bulbulia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
