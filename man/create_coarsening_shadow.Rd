% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot-shadows-extended.R
\name{create_coarsening_shadow}
\alias{create_coarsening_shadow}
\title{Create a coarsening shadow}
\usage{
create_coarsening_shadow(
  variables,
  breaks,
  labels = NULL,
  type = c("midpoint", "lower", "upper", "random", "heaping"),
  heaping_digits = c(0, 5),
  heaping_prob = 0.7,
  include_lowest = TRUE,
  right = TRUE,
  name = NULL
)
}
\arguments{
\item{variables}{Character vector of variable names to coarsen}

\item{breaks}{Either a numeric vector of break points or a single number
giving the number of intervals}

\item{labels}{Character vector of labels for the bins (optional)}

\item{type}{Character string specifying how to handle values within bins:
"midpoint" (bin centres), "lower" (left edge), "upper" (right edge),
"random" (uniform within bin), or "heaping" (digit preference patterns)}

\item{heaping_digits}{Numeric vector of preferred final digits when type="heaping"
(default c(0, 5) for rounding to 0s and 5s)}

\item{heaping_prob}{Probability of heaping when type="heaping" (default 0.7)}

\item{include_lowest}{Logical, whether to include the lowest value in the first bin}

\item{right}{Logical, whether intervals should be closed on the right}

\item{name}{Optional name for the shadow}
}
\value{
A coarsening shadow object
}
\description{
Creates a shadow that converts continuous data to categorical bins,
simulating loss of precision in data collection or privacy-preserving
data release.
}
\examples{
# create age group coarsening
coarsen_age <- create_coarsening_shadow(
  variables = "age",
  breaks = c(0, 18, 25, 35, 45, 55, 65, Inf),
  labels = c("<18", "18-24", "25-34", "35-44", "45-54", "55-64", "65+"),
  type = "midpoint"
)

# create income brackets with heaping at round numbers
coarsen_income <- create_coarsening_shadow(
  variables = c("income_self", "income_spouse"),
  breaks = c(0, 25000, 50000, 75000, 100000, 150000, Inf),
  type = "heaping",
  heaping_digits = c(0),  # heap at multiples of 10000
  heaping_prob = 0.8
)

# create 5-point likert scale from continuous
coarsen_satisfaction <- create_coarsening_shadow(
  variables = "satisfaction_score",
  breaks = 5,  # 5 equal intervals
  type = "lower",  # assume people pick lowest qualifying option
  labels = c("Very Unsatisfied", "Unsatisfied", "Neutral", 
             "Satisfied", "Very Satisfied")
)
}
