% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot-simulate-censoring.R
\name{apply_censoring_post_hoc}
\alias{apply_censoring_post_hoc}
\title{Apply censoring to complete data}
\usage{
apply_censoring_post_hoc(
  complete_data,
  censoring_type = c("built_in", "custom"),
  censoring_function = NULL,
  apply_process_function = TRUE,
  ...
)
}
\arguments{
\item{complete_data}{Data frame from margot_simulate with "margot_meta" attribute}

\item{censoring_type}{Character: "built_in" uses stored probabilities,
"custom" uses a custom function}

\item{censoring_function}{Function for custom censoring (required if censoring_type = "custom").
Should take a data frame and return it with censoring applied.}

\item{apply_process_function}{Logical. Apply margot_process_longitudinal to create
not-lost indicators? Default: TRUE}

\item{...}{Additional arguments passed to margot_process_longitudinal or 
the custom censoring_function}
}
\value{
Data frame with censoring applied and indicators created. The returned
  object maintains the "margot_meta" attribute with additional censoring information.
}
\description{
Takes data generated by margot_simulate and applies censoring based on
the stored censoring probabilities or a custom censoring function.
}
\details{
## Censoring Logic

When a subject is censored at wave k:
1. All variables from wave k onwards are set to NA
2. The subject is considered "lost to follow-up" from that point
3. No future data is observed for that subject

## Not-Lost Indicators

When `apply_process_function = TRUE`, the function creates "not_lost" indicators:
- `t0_not_lost_following_wave`: 1 if subject has data at t1, 0 otherwise
- `t1_not_lost_following_wave`: 1 if subject has data at t2, 0 otherwise
- And so on...

These indicators are useful for:
- Inverse probability of censoring weights (IPCW)
- Determining the at-risk population at each wave
- Creating proper denominators for survival analyses

## Important Note

Unlike some implementations, this function does NOT carry forward last
observations. When a subject is censored:
- Future values are set to NA (not carried forward)
- This represents true missingness due to dropout
- Methods like IPCW or multiple imputation should be used for analysis
}
\examples{
# Generate complete data
complete <- margot_simulate(n = 1000, waves = 3, 
                           censoring = list(rate = 0.2))

# Apply censoring 
observed <- apply_censoring_post_hoc(complete)

# Check censoring rates
table(observed$t0_not_lost_following_wave)
table(observed$t1_not_lost_following_wave)

}
\seealso{
[margot_process_longitudinal()] for details on indicator creation
}
