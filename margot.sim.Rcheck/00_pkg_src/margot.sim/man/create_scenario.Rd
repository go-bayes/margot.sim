% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot-scenarios.R
\name{create_scenario}
\alias{create_scenario}
\title{Scenario Framework for margot}
\usage{
create_scenario(
  name,
  shadows = list(),
  population = NULL,
  description = "",
  justification = "",
  references = NULL
)
}
\arguments{
\item{name}{Character string naming the scenario}

\item{shadows}{List of shadow objects to apply}

\item{population}{Optional population specification}

\item{description}{Character string describing the scenario}

\item{justification}{Character string explaining why these assumptions are plausible}

\item{references}{Optional character vector of supporting references}
}
\value{
A scenario object of class "margot_scenario"
}
\description{
This file implements the scenario abstraction layer that bundles shadows
with justifications for systematic sensitivity analyses.
Create a scenario specification

Creates a scenario that bundles observational shadows with documentation
about assumptions and justifications. Scenarios represent different sets
of assumptions about how data are generated, measured, and selected.
}
\examples{
# create a scenario for typical RCT conditions
rct_scenario <- create_scenario(
  name = "Typical RCT",
  shadows = list(
    measurement = create_shadow(
      type = "measurement_error",
      params = list(
        variables = c("bp", "cholesterol"),
        error_type = "classical",
        sigma = 0.1
      )
    ),
    dropout = create_shadow(
      type = "censoring",
      params = list(
        rate = 0.15,
        mechanism = "MAR"
      )
    )
  ),
  description = "Typical randomised controlled trial with good measurement",
  justification = "Based on protocols from major cardiovascular trials",
  references = c("NEJM 2019;380:1509-1524", "Lancet 2020;395:795-808")
)

# create a scenario for electronic health records
ehr_scenario <- create_scenario(
  name = "EHR Data",
  shadows = list(
    misclass = create_shadow(
      type = "measurement_error",
      params = list(
        variables = "diagnosis",
        error_type = "misclassification",
        sensitivity = 0.85,
        specificity = 0.95
      )
    ),
    missingness = create_item_missingness_shadow(
      variables = c("lab_values", "vitals"),
      mechanism = "MAR",
      rate = 0.30,
      dependent_vars = c("age", "severity")
    )
  ),
  description = "Electronic health record data with typical limitations",
  justification = "Validation studies show 85\% sensitivity for diagnoses"
)
}
